{"ast":null,"code":"import _toConsumableArray from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\src\\\\containers\\\\PlayTable\\\\PlayTable.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink, Redirect } from 'react-router-dom';\nimport classes from './PlayTable.css';\nimport Dibs from '../../components/Dibs/DIbs';\nimport Rate from '../../components/Rate/Rate';\nimport Enemy from '../../components/Enemy/Enemy';\nimport PlayButton from '../../components/UI/PlayButton/PlayButton';\nimport BetButton from '../../components/UI/BetButton/BetButton';\nimport Button from '../../components/UI/Button/Button';\nimport Timer from '../../components/UI/Timer/Timer';\nimport DealerHand from '../../components/DealerHand/DealerHand';\nimport EnemyHand from '../../components/EnemyHand/EnemyHand';\nimport PlayerHand from '../../components/PlayerHand/PlayerHand';\nimport { fetchMakeBet as _fetchMakeBet, onPlayHandler as _onPlayHandler, onEnoughHandler as _onEnoughHandler, onMoreHandler as _onMoreHandler, getDataUser as _getDataUser, onPlayWithUserHandler as _onPlayWithUserHandler, onMoreWithUserHandler as _onMoreWithUserHandler, onEnoughWithUserHandler as _onEnoughWithUserHandler } from '../../store/actions/playTable';\nimport Chat, { scrollDown } from '../../components/UI/Chat/Chat';\nimport { connection, playHubProxy } from '../../Hubs/Hubs';\nimport { runInThisContext } from 'vm';\nvar userId;\nvar enemyId;\n\nvar PlayTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PlayTable, _Component);\n\n  function PlayTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PlayTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PlayTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isLogout: false,\n      bet: 0,\n      cash: 0,\n      enemyName: '',\n      enemyBet: 0,\n      enemyCash: 0,\n      messages: [],\n      enableBet: false,\n      timer: false,\n      time: 20,\n      betCount: 3,\n      isFold: false,\n      isCheck: false,\n      isRaise: false,\n      isBet: true,\n      firstBet: true\n    };\n\n    _this.isLogout = function () {\n      localStorage.removeItem('userId');\n\n      _this.setState({\n        isLogout: true\n      });\n\n      connection.stop();\n      console.log('stop');\n    };\n\n    _this.onCreateDibHandler = function (value) {\n      var bet;\n      var cash;\n\n      if (localStorage.getItem('enemyId') != -1) {\n        bet = _this.state.bet + parseInt(value);\n        cash = _this.state.cash - parseInt(value);\n      } else {\n        bet = parseInt(localStorage.getItem('bet')) + parseInt(value);\n        cash = parseInt(_this.props.cash) - parseInt(value);\n      }\n\n      if (bet !== 0 && cash >= 0 && (_this.props.playerHandSum === 0 || _this.state.enableBet) && (_this.state.enableBet && bet <= _this.state.enemyCash || localStorage.getItem('enemyId') == -1)) {\n        var wrapper = document.createElement('div');\n\n        while (value > 0) {\n          var div = document.createElement('div');\n          var div_enemy = document.createElement('div');\n\n          if (value >= 200) {\n            div.className = classes.dib_200 + ' ' + classes.user_dib_200;\n            div_enemy.className = classes.dib_200 + ' ' + classes.enemy_dib_200;\n            value -= 200;\n            div.innerHTML = 200;\n            div_enemy.innerHTML = 200;\n          } else if (value >= 100) {\n            div.className = classes.dib_100 + ' ' + classes.user_dib_100;\n            div_enemy.className = classes.dib_100 + ' ' + classes.enemy_dib_100;\n            value -= 100;\n            div.innerHTML = 100;\n            div_enemy.innerHTML = 100;\n          } else if (value >= 50) {\n            div.className = classes.dib_50 + ' ' + classes.user_dib_50;\n            div_enemy.className = classes.dib_50 + ' ' + classes.enemy_dib_50;\n            value -= 50;\n            div.innerHTML = 50;\n            div_enemy.innerHTML = 50;\n          } else if (value >= 25) {\n            div.className = classes.dib_25 + ' ' + classes.user_dib_25;\n            div_enemy.className = classes.dib_25 + ' ' + classes.enemy_dib_25;\n            value -= 25;\n            div.innerHTML = 25;\n            div_enemy.innerHTML = 25;\n          } else if (value >= 5) {\n            div.className = classes.dib_5 + ' ' + classes.user_dib_5;\n            div_enemy.className = classes.dib_5 + ' ' + classes.enemy_dib_5;\n            value -= 5;\n            div.innerHTML = 5;\n            div_enemy.innerHTML = 5;\n          } else {\n            div.className = classes.dib_1 + ' ' + classes.user_dib_1;\n            div_enemy.className = classes.dib_1 + ' ' + classes.enemy_dib_1;\n            value -= 1;\n            div.innerHTML = 1;\n            div_enemy.innerHTML = 1;\n          }\n\n          document.getElementById('dibsBet').appendChild(div);\n          wrapper.appendChild(div_enemy);\n        }\n\n        localStorage.setItem('bet', bet);\n        localStorage.setItem('cash', cash);\n\n        _this.setState({\n          bet: bet,\n          cash: cash\n        });\n\n        if (bet > _this.state.enemyBet) {\n          _this.setState({\n            isCheck: false,\n            isRaise: true\n          });\n        } else {\n          _this.setState({\n            isCheck: true,\n            isRaise: false\n          });\n        }\n\n        _this.props.fetchMakeBet(bet, cash, true);\n\n        localStorage.setItem('dibsBet', document.getElementById('dibsBet').innerHTML);\n\n        if (localStorage.getItem('enemyId') != -1) {\n          playHubProxy.invoke('userBet', cash, bet, wrapper.innerHTML);\n        }\n      }\n    };\n\n    _this.onSend = function (value) {\n      _this.setState({\n        messages: _toConsumableArray(_this.state.messages).concat([{\n          userName: _this.props.nameUser,\n          message: value\n        }])\n      });\n\n      playHubProxy.invoke('gameChat', userId, value);\n    };\n\n    _this.playOffer = function () {\n      playHubProxy.invoke('playOffer', userId);\n    };\n\n    _this.onFold = function () {\n      console.log('fold');\n    };\n\n    _this.onCheck = function () {\n      var difference = _this.state.enemyBet - _this.state.bet;\n\n      _this.onCreateDibHandler(difference);\n\n      _this.setState({\n        isBet: false,\n        firstBet: false\n      });\n\n      localStorage.setItem('firstBet', 'false');\n      localStorage.setItem('isbet', 'false');\n\n      _this.playOffer();\n\n      _this.props.onPlayWithUserHandler();\n    };\n\n    _this.onRaise = function () {\n      _this.playOffer();\n    };\n\n    _this.onMore = function () {\n      console.log('more');\n\n      _this.props.onMoreWithUserHandler();\n    };\n\n    _this.onEnough = function () {\n      console.log('enough');\n\n      _this.props.onEnoughWithUserHandler();\n\n      _this.setState({\n        enableBet: false\n      });\n\n      _this.playOffer();\n\n      console.log(localStorage.getItem('enableBet'));\n    };\n\n    _this.endGame = function () {\n      if (enemyId != -1) {\n        playHubProxy.invoke('stopGame', userId);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(PlayTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      userId = localStorage.getItem('userId');\n      enemyId = localStorage.getItem('enemyId');\n\n      if (localStorage.getItem('isBet') == null) {\n        localStorage.setItem('isBet', this.state.isBet);\n      } else {\n        this.setState({\n          isBet: localStorage.getItem('isBet') == 'true'\n        });\n      }\n\n      if (localStorage.getItem('dibsBet') != null) {\n        document.getElementById('dibsBet').innerHTML = localStorage.getItem('dibsBet');\n      }\n\n      if (localStorage.getItem('enemyDibsBet') != null) {\n        document.getElementById('enemyDibsBet').innerHTML = localStorage.getItem('enemyDibsBet');\n      }\n\n      console.log('user = ' + userId + ' enemy = ' + enemyId);\n\n      if (userId == null) {\n        this.setState({\n          isLogout: true\n        });\n      } else {\n        this.setState({\n          isLogout: false\n        });\n      }\n\n      this.props.getDataUser(userId);\n      playHubProxy.on('onGameStart', function (user, enemy, messages, firstId) {\n        this.setState({\n          cash: user.cash,\n          bet: user.bet,\n          enemyName: enemy.name,\n          enemyCash: enemy.cash,\n          enemyBet: enemy.bet,\n          messages: messages\n        });\n\n        if (localStorage.getItem('enableBet') == null) {\n          if (firstId == localStorage.getItem('userId')) {\n            this.setState({\n              enableBet: true\n            });\n            this.playOffer();\n          }\n        } else if (localStorage.getItem('enableBet') == 'true') {\n          this.setState({\n            enableBet: true,\n            isFold: true,\n            isCheck: this.state.enemyBet > this.state.bet,\n            isRaise: this.state.enemyBet < this.state.bet\n          });\n        } else {\n          this.setState({\n            enableBet: false,\n            isFold: false,\n            isCheck: false,\n            isRaise: false\n          });\n        }\n\n        scrollDown();\n      }.bind(this));\n      playHubProxy.on('onEnemyBet', function (enemy, dibsBet) {\n        if (localStorage.getItem('enemyDibsBet') == null) {\n          localStorage.setItem('enemyDibsBet', dibsBet);\n        } else {\n          localStorage.setItem('enemyDibsBet', localStorage.getItem('enemyDibsBet') + dibsBet);\n        }\n\n        var tmp = document.createElement('div');\n        tmp.innerHTML = dibsBet;\n        document.getElementById('enemyDibsBet').appendChild(tmp);\n        this.setState({\n          enemyCash: enemy.cash,\n          enemyBet: enemy.bet\n        });\n      }.bind(this));\n      playHubProxy.on('onBet', function (user) {\n        this.setState({\n          cash: user.cash,\n          bet: user.bet\n        });\n      }.bind(this));\n      playHubProxy.on('onStopGame', function () {\n        this.props.history.push('/profile');\n      }.bind(this));\n      playHubProxy.on('onMessage', function (message) {\n        this.setState({\n          messages: _toConsumableArray(this.state.messages).concat([message])\n        });\n        scrollDown();\n      }.bind(this));\n      playHubProxy.on('onPlayOffer', function (userId) {\n        if (this.state.bet == this.state.enemyBet && this.state.bet > 0 && this.state.firstBet) {\n          this.setState({\n            isBet: false,\n            firstBet: false,\n            enableBet: false\n          });\n          localStorage.setItem('enableBet', 'false');\n          localStorage.setItem('isBet', 'false');\n          localStorage.setItem('firstBet', 'false');\n          this.props.onPlayWithUserHandler();\n        } else if (userId == localStorage.getItem('userId') && this.state.firstBet) {\n          this.setState({\n            enableBet: false,\n            isRaise: false,\n            isCheck: false,\n            isFold: false\n          });\n          localStorage.setItem('enableBet', 'false');\n        } else if (this.state.firstBet) {\n          this.setState({\n            enableBet: true,\n            isFold: true,\n            isCheck: this.state.enemyBet > 0\n          });\n          localStorage.setItem('enableBet', 'true');\n        }\n\n        console.log('playOffer ' + localStorage.getItem('enableBet'));\n      }.bind(this));\n      playHubProxy.on('onTimer', function (time) {\n        this.setState({\n          time: time,\n          timer: true\n        });\n      }.bind(this));\n\n      if (enemyId != -1) {\n        connection.start().done(function () {\n          console.log('start game');\n          playHubProxy.invoke('gameStart', userId);\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.setState({\n        bet: 0,\n        cash: 0,\n        enemyName: '',\n        enemyBet: 0,\n        enemyCash: 0\n      });\n      localStorage.removeItem('playerHand');\n      localStorage.removeItem('dealerHand');\n      localStorage.removeItem('playerHandSum');\n      localStorage.removeItem('dealerHandSum');\n      localStorage.removeItem('bet');\n      localStorage.removeItem('isBet');\n      localStorage.removeItem('enableBet');\n      localStorage.removeItem('firstBet');\n      localStorage.removeItem('cash');\n      localStorage.removeItem('dibsBet');\n      localStorage.removeItem('enemyDibsBet');\n      localStorage.removeItem('name');\n      playHubProxy.off('onGameStart');\n      playHubProxy.off('onEnemyBet');\n      playHubProxy.off('onBet');\n      playHubProxy.off('onStopGame');\n      playHubProxy.off('onMessage');\n      playHubProxy.off('onPlayOffer');\n      playHubProxy.off('onTimer');\n      connection.stop();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isLogout) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373\n          },\n          __self: this\n        });\n      }\n      /*console.log('isBet ' + this.state.isBet);\n      console.log('enableBet ' + this.state.enableBet);*/\n\n\n      return React.createElement(\"div\", {\n        className: classes.PlayTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.Container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, enemyId != -1 ? React.createElement(Rate, {\n        bet: this.state.bet,\n        cash: this.state.cash,\n        name: this.props.nameUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }) : React.createElement(Rate, {\n        bet: this.props.bet,\n        cash: this.props.cash,\n        name: this.props.nameUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }), enemyId != -1 ? React.createElement(Enemy, {\n        bet: this.state.enemyBet,\n        cash: this.state.enemyCash,\n        name: this.state.enemyName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }) : null, enemyId == -1 ? React.createElement(DealerHand, {\n        dealerHand: this.props.dealerHand,\n        dealerHandSum: this.props.dealerHandSum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }) : React.createElement(EnemyHand, {\n        enemyHand: 0 //----------------------------------------------enemy cards\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"dibsBet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"enemyDibsBet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }), React.createElement(Timer, {\n        enableBet: this.state.enableBet,\n        timer: this.state.timer,\n        time: this.state.time,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }), React.createElement(PlayerHand, {\n        playerHand: this.props.playerHand,\n        playerHandSum: this.props.playerHandSum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }), React.createElement(Dibs, {\n        dibs: this.props.dibs,\n        onDibCLick: this.onCreateDibHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }), this.state.isBet && enemyId != -1 ? React.createElement(BetButton, {\n        onFold: this.onFold,\n        onCheck: this.onCheck,\n        onRaise: this.onRaise,\n        disabledFold: !this.state.isFold,\n        disabledCheck: !this.state.isCheck,\n        disabledRaise: !this.state.isRaise,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424\n        },\n        __self: this\n      }) : enemyId != -1 ? React.createElement(PlayButton, {\n        onEnough: this.onEnough,\n        onMore: this.onMore,\n        disabledEnough: !this.state.enableBet,\n        disabledMore: !this.state.enableBet\n        /*disabledEnough={!this.props.isEnough}\n        disabledMore={!this.props.isMore}*/\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }) : React.createElement(PlayButton, {\n        onPlay: this.props.onPlayHandler,\n        onEnough: this.props.onEnoughHandler,\n        onMore: this.props.onMoreHandler,\n        disabledPlay: !this.props.isPlay,\n        disabledEnough: !this.props.isEnough,\n        disabledMore: !this.props.isMore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }), enemyId != -1 ? React.createElement(Chat, {\n        UserName: this.props.nameUser,\n        Messages: this.state.messages,\n        onSend: this.onSend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: classes.Button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"success\",\n        onClick: this.endGame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460\n        },\n        __self: this\n      }, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")), React.createElement(Button, {\n        type: \"error\",\n        onClick: this.isLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }, \"\\u0412\\u044B\\u0445\\u043E\\u0434\"))));\n    }\n  }]);\n\n  return PlayTable;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    deck: state.playTable.deck,\n    dibs: state.playTable.dibs,\n    bet: state.playTable.bet,\n    cash: state.playTable.cash,\n    nameUser: state.playTable.nameUser,\n    playerHand: state.playTable.playerHand,\n    playerHandSum: state.playTable.playerHandSum,\n    dealerHand: state.playTable.dealerHand,\n    dealerHandSum: state.playTable.dealerHandSum,\n    isPlay: state.playTable.isPlay,\n    isEnough: state.playTable.isEnough,\n    isMore: state.playTable.isMore,\n    backProfile: state.playTable.backProfile,\n    isExit: state.playTable.isExit\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchMakeBet: function fetchMakeBet(bet, cash, isPlay) {\n      return dispatch(_fetchMakeBet(bet, cash, isPlay));\n    },\n    getDataUser: function getDataUser(userId) {\n      return dispatch(_getDataUser(userId));\n    },\n    onPlayHandler: function onPlayHandler() {\n      return dispatch(_onPlayHandler());\n    },\n    onEnoughHandler: function onEnoughHandler() {\n      return dispatch(_onEnoughHandler());\n    },\n    onMoreHandler: function onMoreHandler() {\n      return dispatch(_onMoreHandler());\n    },\n    onPlayWithUserHandler: function onPlayWithUserHandler() {\n      return dispatch(_onPlayWithUserHandler());\n    },\n    onMoreWithUserHandler: function onMoreWithUserHandler() {\n      return dispatch(_onMoreWithUserHandler());\n    },\n    onEnoughWithUserHandler: function onEnoughWithUserHandler() {\n      return dispatch(_onEnoughWithUserHandler());\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayTable);","map":{"version":3,"sources":["D:\\C#\\blackjack_WebAPI - Copy\\front-end\\src\\containers\\PlayTable\\PlayTable.js"],"names":["React","Component","connect","NavLink","Redirect","classes","Dibs","Rate","Enemy","PlayButton","BetButton","Button","Timer","DealerHand","EnemyHand","PlayerHand","fetchMakeBet","onPlayHandler","onEnoughHandler","onMoreHandler","getDataUser","onPlayWithUserHandler","onMoreWithUserHandler","onEnoughWithUserHandler","Chat","scrollDown","connection","playHubProxy","runInThisContext","userId","enemyId","PlayTable","state","isLogout","bet","cash","enemyName","enemyBet","enemyCash","messages","enableBet","timer","time","betCount","isFold","isCheck","isRaise","isBet","firstBet","localStorage","removeItem","setState","stop","console","log","onCreateDibHandler","value","getItem","parseInt","props","playerHandSum","wrapper","document","createElement","div","div_enemy","className","dib_200","user_dib_200","enemy_dib_200","innerHTML","dib_100","user_dib_100","enemy_dib_100","dib_50","user_dib_50","enemy_dib_50","dib_25","user_dib_25","enemy_dib_25","dib_5","user_dib_5","enemy_dib_5","dib_1","user_dib_1","enemy_dib_1","getElementById","appendChild","setItem","invoke","onSend","userName","nameUser","message","playOffer","onFold","onCheck","difference","onRaise","onMore","onEnough","endGame","on","user","enemy","firstId","name","bind","dibsBet","tmp","history","push","start","done","off","Container","dealerHand","dealerHandSum","playerHand","dibs","isPlay","isEnough","isMore","mapStateToProps","deck","playTable","backProfile","isExit","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {NavLink, Redirect} from 'react-router-dom'\nimport classes from './PlayTable.css'\nimport Dibs from '../../components/Dibs/DIbs'\nimport Rate from '../../components/Rate/Rate'\nimport Enemy from '../../components/Enemy/Enemy'\nimport PlayButton from '../../components/UI/PlayButton/PlayButton'\nimport BetButton from '../../components/UI/BetButton/BetButton'\nimport Button from '../../components/UI/Button/Button'\nimport Timer from '../../components/UI/Timer/Timer'\nimport DealerHand from '../../components/DealerHand/DealerHand'\nimport EnemyHand from '../../components/EnemyHand/EnemyHand'\nimport PlayerHand from '../../components/PlayerHand/PlayerHand'\nimport {fetchMakeBet, \n        onPlayHandler,\n        onEnoughHandler,\n        onMoreHandler,\n        getDataUser,\n        onPlayWithUserHandler,\n        onMoreWithUserHandler,\n        onEnoughWithUserHandler} from '../../store/actions/playTable'\n\nimport Chat, {scrollDown} from '../../components/UI/Chat/Chat'\nimport {connection, playHubProxy} from '../../Hubs/Hubs'\nimport { runInThisContext } from 'vm';\n\nvar userId;\nvar enemyId;\n\nclass PlayTable extends Component {\n    state = {\n        isLogout: false,\n        bet: 0,\n        cash: 0,\n        enemyName: '',\n        enemyBet: 0,\n        enemyCash: 0,\n        messages: [],\n        enableBet: false,\n        timer: false,\n        time: 20,\n        betCount: 3,\n        isFold: false,\n        isCheck: false,\n        isRaise: false,\n        isBet: true,\n        firstBet: true\n    }\n\n    isLogout = () => {\n        localStorage.removeItem('userId');\n        this.setState({\n            isLogout: true\n        });\n        connection.stop();\n        console.log('stop');\n    }\n    \n    onCreateDibHandler = value =>{\n        let bet;\n        let cash;\n        if(localStorage.getItem('enemyId') != -1){\n            bet = (this.state.bet) + parseInt(value);\n            cash = (this.state.cash) - parseInt(value);\n        } else {\n            bet = (parseInt(localStorage.getItem('bet'))) + parseInt(value);\n            cash = (parseInt(this.props.cash)) - parseInt(value);\n        }\n        if(bet !== 0 && cash >= 0 && (this.props.playerHandSum === 0 || this.state.enableBet) && (this.state.enableBet && bet <= this.state.enemyCash || localStorage.getItem('enemyId') == -1 )){\n            let wrapper = document.createElement('div');\n            while(value > 0){\n                let div = document.createElement('div');\n                let div_enemy = document.createElement('div');\n                if(value >= 200){\n                    div.className = classes.dib_200 + ' ' + classes.user_dib_200\n                    div_enemy.className = classes.dib_200 + ' ' + classes.enemy_dib_200\n                    value -= 200;\n                    div.innerHTML = 200;\n                    div_enemy.innerHTML = 200;\n                } else if(value >= 100){\n                    div.className = classes.dib_100 + ' ' + classes.user_dib_100\n                    div_enemy.className = classes.dib_100 + ' ' + classes.enemy_dib_100\n                    value -= 100;\n                    div.innerHTML = 100;\n                    div_enemy.innerHTML = 100;\n                } else if(value >= 50){\n                    div.className = classes.dib_50 + ' ' + classes.user_dib_50\n                    div_enemy.className = classes.dib_50 + ' ' + classes.enemy_dib_50\n                    value -= 50;\n                    div.innerHTML = 50;\n                    div_enemy.innerHTML = 50;\n                } else if(value >= 25){\n                    div.className = classes.dib_25 + ' ' + classes.user_dib_25\n                    div_enemy.className = classes.dib_25 + ' ' + classes.enemy_dib_25\n                    value -= 25;\n                    div.innerHTML = 25;\n                    div_enemy.innerHTML = 25;\n                } else if(value >= 5){\n                    div.className = classes.dib_5 + ' ' + classes.user_dib_5\n                    div_enemy.className = classes.dib_5 + ' ' + classes.enemy_dib_5\n                    value -= 5;\n                    div.innerHTML = 5;\n                    div_enemy.innerHTML = 5;\n                } else{\n                    div.className = classes.dib_1 + ' ' + classes.user_dib_1\n                    div_enemy.className = classes.dib_1 + ' ' + classes.enemy_dib_1\n                    value -= 1;\n                    div.innerHTML = 1;\n                    div_enemy.innerHTML = 1;\n                }\n                document.getElementById('dibsBet').appendChild(div);\n                wrapper.appendChild(div_enemy);\n            }\n            localStorage.setItem('bet', bet);\n            localStorage.setItem('cash', cash);\n            this.setState({\n                bet: bet,\n                cash: cash\n            });\n            if(bet > this.state.enemyBet){\n                this.setState({\n                    isCheck: false,\n                    isRaise: true\n                });\n            } else{\n                this.setState({\n                    isCheck: true,\n                    isRaise: false\n                });\n            }\n            this.props.fetchMakeBet(bet, cash, true);\n            localStorage.setItem('dibsBet', document.getElementById('dibsBet').innerHTML);\n            \n            if(localStorage.getItem('enemyId') != -1){\n                playHubProxy.invoke('userBet', cash, bet, wrapper.innerHTML);\n            }\n        }        \n    }\n\n    componentDidMount(){\n        userId = localStorage.getItem('userId');\n        enemyId = localStorage.getItem('enemyId');\n\n        if(localStorage.getItem('isBet') == null){\n            localStorage.setItem('isBet', this.state.isBet);\n        } else{\n            this.setState({\n                isBet: localStorage.getItem('isBet') == 'true'\n            });\n        }\n        \n        if(localStorage.getItem('dibsBet') != null){\n            document.getElementById('dibsBet').innerHTML = (localStorage.getItem('dibsBet'));\n        }\n        \n        if(localStorage.getItem('enemyDibsBet') != null){\n            document.getElementById('enemyDibsBet').innerHTML = (localStorage.getItem('enemyDibsBet'));\n        }\n\n        console.log('user = ' + userId + ' enemy = ' + enemyId);\n\n        if(userId == null){\n            this.setState({\n            isLogout: true\n        });\n        } else {\n            this.setState({\n                isLogout: false\n            });\n        }\n        this.props.getDataUser(userId);\n\n        playHubProxy.on('onGameStart', function(user, enemy, messages, firstId){\n            this.setState({\n                cash: user.cash,\n                bet: user.bet,\n                enemyName: enemy.name,\n                enemyCash: enemy.cash,\n                enemyBet: enemy.bet,\n                messages: messages\n            });\n            if(localStorage.getItem('enableBet') == null){\n                if(firstId == localStorage.getItem('userId')){\n                    this.setState({\n                        enableBet: true\n                    });\n                    this.playOffer();\n                }\n            } else if(localStorage.getItem('enableBet') == 'true'){\n                this.setState({\n                    enableBet: true,\n                    isFold: true,\n                    isCheck: this.state.enemyBet > this.state.bet,\n                    isRaise: this.state.enemyBet < this.state.bet\n                });\n            } else{\n                this.setState({\n                    enableBet: false,\n                    isFold: false,\n                    isCheck: false,\n                    isRaise: false\n                });\n            }\n            scrollDown();\n        }.bind(this));\n\n        playHubProxy.on('onEnemyBet', function(enemy, dibsBet){\n            if(localStorage.getItem('enemyDibsBet') == null){\n                localStorage.setItem('enemyDibsBet', dibsBet);\n            } else{\n                localStorage.setItem('enemyDibsBet', localStorage.getItem('enemyDibsBet') + dibsBet);\n            }\n            var tmp = document.createElement('div');\n            tmp.innerHTML = dibsBet;\n            document.getElementById('enemyDibsBet').appendChild(tmp);\n            this.setState({\n                enemyCash: enemy.cash,\n                enemyBet: enemy.bet\n            });\n        }.bind(this));\n\n        playHubProxy.on('onBet', function(user){                  \n            this.setState({                    \n                cash: user.cash,\n                bet: user.bet\n            });\n        }.bind(this));\n\n        playHubProxy.on('onStopGame', function(){\n            this.props.history.push('/profile');\n        }.bind(this));\n\n        playHubProxy.on('onMessage', function(message){\n            this.setState({\n                messages: [...this.state.messages, message]\n            });\n            scrollDown();\n        }.bind(this));\n\n        playHubProxy.on('onPlayOffer', function(userId){\n            if(this.state.bet == this.state.enemyBet && this.state.bet > 0 && this.state.firstBet){\n                this.setState({\n                    isBet: false,\n                    firstBet: false,\n                    enableBet: false\n                });\n                localStorage.setItem('enableBet', 'false');\n                localStorage.setItem('isBet', 'false');\n                localStorage.setItem('firstBet', 'false');\n                this.props.onPlayWithUserHandler();\n            } else if(userId == localStorage.getItem('userId') && this.state.firstBet){\n                this.setState({\n                    enableBet: false,\n                    isRaise: false,\n                    isCheck: false,\n                    isFold: false\n                });\n                localStorage.setItem('enableBet', 'false');\n            } else if(this.state.firstBet){\n                this.setState({\n                    enableBet: true,\n                    isFold: true,\n                    isCheck: this.state.enemyBet > 0\n                });\n                localStorage.setItem('enableBet', 'true');\n            }\n            console.log('playOffer ' + localStorage.getItem('enableBet'));\n        }.bind(this));\n\n        playHubProxy.on('onTimer', function(time){\n            this.setState({\n                time: time,\n                timer: true\n            });\n        }.bind(this));            \n\n        if(enemyId != -1){\n            connection.start().done(function(){\n                console.log('start game');\n                playHubProxy.invoke('gameStart', userId);\n            }.bind(this));\n        }\n    }\n\n    componentWillUnmount(){\n        this.setState({\n            bet: 0,\n            cash: 0,\n            enemyName: '',\n            enemyBet: 0,\n            enemyCash: 0\n        });\n        localStorage.removeItem('playerHand');\n        localStorage.removeItem('dealerHand');\n        localStorage.removeItem('playerHandSum');\n        localStorage.removeItem('dealerHandSum');\n\n        localStorage.removeItem('bet');\n        localStorage.removeItem('isBet');\n        localStorage.removeItem('enableBet');\n        localStorage.removeItem('firstBet');\n        localStorage.removeItem('cash');\n        localStorage.removeItem('dibsBet');\n        localStorage.removeItem('enemyDibsBet');\n        localStorage.removeItem('name');\n        playHubProxy.off('onGameStart');\n        playHubProxy.off('onEnemyBet');\n        playHubProxy.off('onBet');\n        playHubProxy.off('onStopGame');\n        playHubProxy.off('onMessage');\n        playHubProxy.off('onPlayOffer');\n        playHubProxy.off('onTimer');\n\n        connection.stop();\n    }\n\n    onSend = (value) =>{\n        this.setState({\n            messages: [...this.state.messages, {userName: this.props.nameUser, message: value}]\n        });\n        playHubProxy.invoke('gameChat', userId, value);\n    }\n\n    playOffer = () =>{\n        playHubProxy.invoke('playOffer', userId);\n    }\n\n    onFold = () =>{\n        console.log('fold');\n    }\n\n    onCheck = () =>{\n        var difference = this.state.enemyBet - this.state.bet;\n        this.onCreateDibHandler(difference);\n        this.setState({\n            isBet: false,\n            firstBet: false\n        });\n        localStorage.setItem('firstBet', 'false');\n        localStorage.setItem('isbet', 'false');\n        this.playOffer();\n        this.props.onPlayWithUserHandler();\n    }\n\n    onRaise = () =>{\n        this.playOffer();\n    }\n\n    onMore = () =>{\n        console.log('more');\n        this.props.onMoreWithUserHandler();\n    }\n\n    onEnough = () =>{\n        console.log('enough');\n        this.props.onEnoughWithUserHandler();\n        this.setState({\n            enableBet: false\n        });\n        this.playOffer();\n        console.log(localStorage.getItem('enableBet'));\n    }\n\n    endGame = () =>{\n        if(enemyId != -1){\n            playHubProxy.invoke('stopGame', userId);\n        }\n    }\n\n    render(){\n        if(this.state.isLogout){\n            return (<Redirect to='/' />)\n        }\n        /*console.log('isBet ' + this.state.isBet);\n        console.log('enableBet ' + this.state.enableBet);*/\n        return(\n            <div className={classes.PlayTable}>\n            <div className={classes.Container}>\n                {enemyId != -1 ?\n                    <Rate\n                        bet={this.state.bet}\n                        cash={this.state.cash}\n                        name={this.props.nameUser}\n                    /> :\n                    <Rate\n                        bet={this.props.bet}\n                        cash={this.props.cash}\n                        name={this.props.nameUser}\n                    />\n                }\n                {enemyId != -1 ?\n                    <Enemy \n                        bet={this.state.enemyBet}\n                        cash={this.state.enemyCash}\n                        name={this.state.enemyName}\n                    /> : null\n                }\n                {enemyId == -1 ?\n                    <DealerHand \n                        dealerHand={this.props.dealerHand}\n                        dealerHandSum={this.props.dealerHandSum}\n                    /> :\n                    <EnemyHand \n                        enemyHand={0}//----------------------------------------------enemy cards\n                    />\n                }\n                <div id=\"dibsBet\"></div>\n                <div id=\"enemyDibsBet\"></div>\n                <Timer\n                    enableBet={this.state.enableBet}\n                    timer={this.state.timer}\n                    time={this.state.time}\n                />\n                <PlayerHand \n                    playerHand={this.props.playerHand}\n                    playerHandSum={this.props.playerHandSum}\n                />\n                <Dibs \n                    dibs={this.props.dibs}\n                    onDibCLick={this.onCreateDibHandler}\n                />\n                {this.state.isBet && enemyId != -1 ?\n                    <BetButton \n                        onFold={this.onFold}\n                        onCheck={this.onCheck}\n                        onRaise={this.onRaise}\n                        disabledFold={!this.state.isFold}\n                        disabledCheck={!this.state.isCheck}\n                        disabledRaise={!this.state.isRaise}\n                    /> :\n                    enemyId != -1 ?\n                    <PlayButton\n                        onEnough={this.onEnough}\n                        onMore={this.onMore}\n                        disabledEnough={!this.state.enableBet}\n                        disabledMore={!this.state.enableBet}\n                        /*disabledEnough={!this.props.isEnough}\n                        disabledMore={!this.props.isMore}*/\n                    /> :\n                    <PlayButton\n                        onPlay={this.props.onPlayHandler}\n                        onEnough={this.props.onEnoughHandler}\n                        onMore={this.props.onMoreHandler}\n                        disabledPlay={!this.props.isPlay}\n                        disabledEnough={!this.props.isEnough}\n                        disabledMore={!this.props.isMore}\n                    />\n                }\n\n                {enemyId != -1 ?\n                    <Chat\n                        UserName={this.props.nameUser}\n                        Messages={this.state.messages}\n                        onSend={this.onSend}\n                    />: null\n                }\n                <div className={classes.Button}>\n                    <NavLink to=\"/profile\">\n                        <Button \n                            type=\"success\" \n                            onClick={this.endGame}\n                        ></Button>\n                    </NavLink>         \n                    <Button \n                        type=\"error\"\n                        onClick={this.isLogout}\n                    ></Button>\n                </div>                   \n            </div>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state){\n    return{\n        deck: state.playTable.deck,\n        dibs:state.playTable.dibs,\n        bet: state.playTable.bet,\n        cash: state.playTable.cash,\n        nameUser: state.playTable.nameUser,\n        playerHand: state.playTable.playerHand,\n        playerHandSum: state.playTable.playerHandSum,\n        dealerHand: state.playTable.dealerHand,\n        dealerHandSum: state.playTable.dealerHandSum,\n        isPlay: state.playTable.isPlay,\n        isEnough: state.playTable.isEnough,\n        isMore: state.playTable.isMore,\n        backProfile: state.playTable.backProfile,\n        isExit: state.playTable.isExit\n    }\n}\n\nfunction mapDispatchToProps(dispatch){\n    return{\n        fetchMakeBet: (bet, cash, isPlay)=> dispatch(fetchMakeBet(bet, cash, isPlay)),\n        getDataUser: userId => dispatch(getDataUser(userId)),\n        onPlayHandler: () => dispatch(onPlayHandler()),\n        onEnoughHandler: () => dispatch(onEnoughHandler()),\n        onMoreHandler: () => dispatch(onMoreHandler()),\n        onPlayWithUserHandler: () => dispatch(onPlayWithUserHandler()),\n        onMoreWithUserHandler: () => dispatch(onMoreWithUserHandler()),\n        onEnoughWithUserHandler: () => dispatch(onEnoughWithUserHandler())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayTable)"]},"metadata":{},"sourceType":"module"}