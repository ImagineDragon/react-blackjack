{"ast":null,"code":"import _classCallCheck from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\src\\\\containers\\\\PlayTable\\\\PlayTable.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink, Redirect } from 'react-router-dom';\nimport classes from './PlayTable.css';\nimport Dibs from '../../components/Dibs/DIbs';\nimport Rate from '../../components/Rate/Rate';\nimport Enemy from '../../components/Enemy/Enemy';\nimport PlayButton from '../../components/UI/PlayButton/PlayButton';\nimport Button from '../../components/UI/Button/Button';\nimport DealerHand from '../../components/DealerHand/DealerHand';\nimport PlayerHand from '../../components/PlayerHand/PlayerHand';\nimport { fetchMakeBet as _fetchMakeBet, onPlayHandler as _onPlayHandler, onEnoughHandler as _onEnoughHandler, onMoreHandler as _onMoreHandler, getDataUser as _getDataUser } from '../../store/actions/playTable';\nimport { connection, playHubProxy } from '../../Hubs/Hubs';\nvar userId = localStorage.getItem('userId');\nvar enemyId = localStorage.getItem('enemyId');\n\nvar PlayTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PlayTable, _Component);\n\n  function PlayTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PlayTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PlayTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isLogout: false,\n      name: '',\n      bet: 0,\n      cash: 0,\n      enemyName: '',\n      enemyBet: 0,\n      enemyCash: 0\n    };\n\n    _this.isLogout = function () {\n      localStorage.removeItem('userId');\n\n      _this.setState({\n        isLogout: true\n      });\n\n      connection.stop();\n      console.log('stop');\n    };\n\n    _this.onCreateDibHandler = function (value) {\n      var div = document.createElement('div');\n\n      switch (value) {\n        case '1':\n          div.className = classes.dib_1;\n          break;\n\n        case '5':\n          div.className = classes.dib_5;\n          break;\n\n        case '25':\n          div.className = classes.dib_25;\n          break;\n\n        case '50':\n          div.className = classes.dib_50;\n          break;\n\n        case '100':\n          div.className = classes.dib_100;\n          break;\n\n        default:\n          div.className = classes.dib_200;\n      }\n\n      div.innerHTML = value;\n      var bet = parseInt(_this.props.bet) + parseInt(value);\n      var cash = parseInt(_this.props.cash) - parseInt(value);\n\n      if (bet !== 0 && cash >= 0 && _this.props.playerHandSum === 0) {\n        var isPlay = true;\n\n        _this.props.fetchMakeBet(bet, cash, isPlay);\n\n        document.getElementById('dibsBet').appendChild(div);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(PlayTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (userId == null) {\n        this.setState({\n          isLogout: true\n        });\n      } else {\n        this.setState({\n          isLogout: false\n        });\n      }\n\n      this.props.getDataUser(userId);\n      console.log('enemyId = ', +enemyId);\n      playHubProxy.on('onGameStart', function (enemy) {\n        console.log(enemy);\n        console.log(localStorage.getItem('cash'));\n\n        if (localStorage.getItem('cash')) {\n          this.setState({\n            name: enemy.name,\n            cash: localStorage.getItem('cash'),\n            bet: localStorage.getItem('bet'),\n            enemyName: enemy.name,\n            enemyCash: enemy.cash,\n            enemyBet: enemy.bet\n          });\n        } else {\n          this.setState({\n            name: props.name,\n            cash: props.cash,\n            bet: props.bet,\n            enemyName: enemy.name,\n            enemyCash: enemy.cash,\n            enemyBet: enemy.bet\n          });\n        }\n      }.bind(this));\n      playHubProxy.on('onEnemyBet', function (enemy) {\n        console.log(enemy);\n        this.setState({\n          enemyCash: enemy.cash,\n          enemyBet: enemy.bet\n        });\n      }.bind(this));\n      connection.start().done(function () {\n        console.log('start game');\n        playHubProxy.invoke('gameStart', userId, enemyId);\n      }.bind(this));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      localStorage.removeItem('cash');\n      playHubProxy.off('onGameStart');\n      playHubProxy.off('onEnemyBet');\n      connection.stop();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isLogout) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: classes.PlayTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Rate, {\n        bet: this.props.bet,\n        cash: this.props.cash,\n        name: this.props.nameUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(Enemy, {\n        bet: this.state.enemyBet,\n        cash: this.state.enemyCash,\n        name: this.state.enemyName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(DealerHand, {\n        dealerHand: this.props.dealerHand,\n        dealerHandSum: this.props.dealerHandSum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"dibsBet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(PlayerHand, {\n        playerHand: this.props.playerHand,\n        playerHandSum: this.props.playerHandSum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(Dibs, {\n        dibs: this.props.dibs,\n        onDibCLick: this.onCreateDibHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(PlayButton, {\n        onPlay: this.props.onPlayHandler,\n        onEnough: this.props.onEnoughHandler,\n        onMore: this.props.onMoreHandler,\n        disabledPlay: !this.props.isPlay,\n        disabledEnough: !this.props.isEnough,\n        disabledMore: !this.props.isMore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.Button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")), React.createElement(Button, {\n        type: \"error\",\n        onClick: this.isLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"\\u0412\\u044B\\u0445\\u043E\\u0434\")));\n    }\n  }]);\n\n  return PlayTable;\n}(Component);\n\nfunction mapStateToProps(state) {\n  if (connection.state === 1) {\n    localStorage.setItem('bet', state.playTable.bet);\n    localStorage.setItem('cash', state.playTable.cash);\n    console.log(localStorage.getItem('bet'));\n    playHubProxy.invoke('userBet', state.playTable.bet, enemyId);\n  }\n\n  return {\n    deck: state.playTable.deck,\n    dibs: state.playTable.dibs,\n    bet: state.playTable.bet,\n    cash: state.playTable.cash,\n    nameUser: state.playTable.nameUser,\n    playerHand: state.playTable.playerHand,\n    playerHandSum: state.playTable.playerHandSum,\n    dealerHand: state.playTable.dealerHand,\n    dealerHandSum: state.playTable.dealerHandSum,\n    isPlay: state.playTable.isPlay,\n    isEnough: state.playTable.isEnough,\n    isMore: state.playTable.isMore,\n    backProfile: state.playTable.backProfile,\n    isExit: state.playTable.isExit\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchMakeBet: function fetchMakeBet(bet, cash, isPlay) {\n      return dispatch(_fetchMakeBet(bet, cash, isPlay));\n    },\n    getDataUser: function getDataUser(userId) {\n      return dispatch(_getDataUser(userId));\n    },\n    onPlayHandler: function onPlayHandler() {\n      return dispatch(_onPlayHandler());\n    },\n    onEnoughHandler: function onEnoughHandler() {\n      return dispatch(_onEnoughHandler());\n    },\n    onMoreHandler: function onMoreHandler() {\n      return dispatch(_onMoreHandler());\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayTable);","map":{"version":3,"sources":["D:\\C#\\blackjack_WebAPI - Copy\\front-end\\src\\containers\\PlayTable\\PlayTable.js"],"names":["React","Component","connect","NavLink","Redirect","classes","Dibs","Rate","Enemy","PlayButton","Button","DealerHand","PlayerHand","fetchMakeBet","onPlayHandler","onEnoughHandler","onMoreHandler","getDataUser","connection","playHubProxy","userId","localStorage","getItem","enemyId","PlayTable","state","isLogout","name","bet","cash","enemyName","enemyBet","enemyCash","removeItem","setState","stop","console","log","onCreateDibHandler","value","div","document","createElement","className","dib_1","dib_5","dib_25","dib_50","dib_100","dib_200","innerHTML","parseInt","props","playerHandSum","isPlay","getElementById","appendChild","on","enemy","bind","start","done","invoke","off","nameUser","dealerHand","dealerHandSum","playerHand","dibs","isEnough","isMore","mapStateToProps","setItem","playTable","deck","backProfile","isExit","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {NavLink, Redirect} from 'react-router-dom'\nimport classes from './PlayTable.css'\nimport Dibs from '../../components/Dibs/DIbs'\nimport Rate from '../../components/Rate/Rate'\nimport Enemy from '../../components/Enemy/Enemy'\nimport PlayButton from '../../components/UI/PlayButton/PlayButton'\nimport Button from '../../components/UI/Button/Button'\nimport DealerHand from '../../components/DealerHand/DealerHand'\nimport PlayerHand from '../../components/PlayerHand/PlayerHand'\nimport {fetchMakeBet, \n        onPlayHandler,\n        onEnoughHandler,\n        onMoreHandler,\n        getDataUser} from '../../store/actions/playTable'\n\nimport {connection, playHubProxy} from '../../Hubs/Hubs'\n\nconst userId = localStorage.getItem('userId');\nconst enemyId = localStorage.getItem('enemyId');\n\nclass PlayTable extends Component {\n    state = {\n        isLogout: false,\n        name: '',\n        bet: 0,\n        cash: 0,\n        enemyName: '',\n        enemyBet: 0,\n        enemyCash: 0\n    }\n\n    isLogout = () => {\n        localStorage.removeItem('userId');\n        this.setState({\n            isLogout: true\n        });\n        connection.stop();\n        console.log('stop');\n    }\n    \n   onCreateDibHandler = value =>{\n        let div = document.createElement('div');\n        switch(value){\n            case '1':\n                div.className = classes.dib_1 \n                break;\n            case '5':\n                div.className = classes.dib_5\n                break;\n            case '25':\n                div.className = classes.dib_25\n                break;\n            case '50':\n                div.className = classes.dib_50\n                break;\n            case '100':\n                div.className = classes.dib_100\n                break;\n            default:\n                div.className = classes.dib_200\n        }        \n        div.innerHTML = value;\n        let bet = parseInt(this.props.bet) + parseInt(value);\n        let cash = parseInt(this.props.cash) - parseInt(value);\n        if(bet !== 0 && cash >= 0 && this.props.playerHandSum === 0){\n            let isPlay = true;\n            this.props.fetchMakeBet(bet, cash, isPlay);\n            document.getElementById('dibsBet').appendChild(div);\n        }\n        \n                \n    }\n\n    componentDidMount(){\n        if(userId == null){\n            this.setState({\n            isLogout: true\n        });\n        } else {\n            this.setState({\n                isLogout: false\n            });\n        }\n        this.props.getDataUser(userId);\n        console.log('enemyId = ', + enemyId);\n        \n        playHubProxy.on('onGameStart', function(enemy){\n            console.log(enemy);\n            console.log(localStorage.getItem('cash'));\n            if(localStorage.getItem('cash')){\n                this.setState({\n                    name: enemy.name,\n                    cash: localStorage.getItem('cash'),\n                    bet: localStorage.getItem('bet'),\n                    enemyName: enemy.name,\n                    enemyCash: enemy.cash,\n                    enemyBet: enemy.bet\n                });\n            } else {\n                this.setState({\n                    name: props.name,\n                    cash: props.cash,\n                    bet: props.bet,\n                    enemyName: enemy.name,\n                    enemyCash: enemy.cash,\n                    enemyBet: enemy.bet\n                });\n            }\n        }.bind(this));\n\n        playHubProxy.on('onEnemyBet', function(enemy){\n            console.log(enemy);\n            this.setState({\n                enemyCash: enemy.cash,\n                enemyBet: enemy.bet\n            });\n        }.bind(this));\n\n        connection.start().done(function(){\n            console.log('start game');\n            playHubProxy.invoke('gameStart', userId, enemyId);\n        }.bind(this));\n    }\n\n    componentWillUnmount(){\n        localStorage.removeItem('cash');\n        playHubProxy.off('onGameStart');\n        playHubProxy.off('onEnemyBet');\n        connection.stop();\n    }\n\n        \n    render(){\n        if(this.state.isLogout){\n            return (<Redirect to='/' />)\n        }\n        return(\n            <div className={classes.PlayTable}>\n                <Rate \n                    bet={this.props.bet}\n                    cash={this.props.cash}\n                    name={this.props.nameUser}\n                />\n                <Enemy \n                    bet={this.state.enemyBet}\n                    cash={this.state.enemyCash}\n                    name={this.state.enemyName}\n                />\n                <DealerHand \n                    dealerHand={this.props.dealerHand}\n                    dealerHandSum={this.props.dealerHandSum}\n                />\n                <div id=\"dibsBet\"></div>\n                <PlayerHand \n                    playerHand={this.props.playerHand}\n                    playerHandSum={this.props.playerHandSum}\n                />\n                <Dibs \n                    dibs={this.props.dibs}\n                    onDibCLick={this.onCreateDibHandler}\n                />\n                <PlayButton \n                    onPlay={this.props.onPlayHandler}\n                    onEnough={this.props.onEnoughHandler}\n                    onMore={this.props.onMoreHandler}\n                    disabledPlay={!this.props.isPlay}\n                    disabledEnough={!this.props.isEnough}\n                    disabledMore={!this.props.isMore}\n                /> \n                <div className={classes.Button}>\n                    <NavLink to=\"/profile\">\n                        <Button \n                            type=\"success\" \n                        >Профиль</Button>\n                    </NavLink>         \n                    <Button \n                        type=\"error\"\n                        onClick={this.isLogout}\n                    >Выход</Button>\n                </div>                   \n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state){\n    if(connection.state === 1){\n        localStorage.setItem('bet', state.playTable.bet);\n        localStorage.setItem('cash', state.playTable.cash);\n        console.log(localStorage.getItem('bet'));\n        playHubProxy.invoke('userBet', state.playTable.bet, enemyId);\n    }\n    return{\n        deck: state.playTable.deck,\n        dibs:state.playTable.dibs,\n        bet: state.playTable.bet,\n        cash: state.playTable.cash,\n        nameUser: state.playTable.nameUser,\n        playerHand: state.playTable.playerHand,\n        playerHandSum: state.playTable.playerHandSum,\n        dealerHand: state.playTable.dealerHand,\n        dealerHandSum: state.playTable.dealerHandSum,\n        isPlay: state.playTable.isPlay,\n        isEnough: state.playTable.isEnough,\n        isMore: state.playTable.isMore,\n        backProfile: state.playTable.backProfile,\n        isExit: state.playTable.isExit\n    }\n}\n\nfunction mapDispatchToProps(dispatch){\n    return{\n        fetchMakeBet: (bet, cash, isPlay)=> dispatch(fetchMakeBet(bet, cash, isPlay)),\n        getDataUser: userId => dispatch(getDataUser(userId)),\n        onPlayHandler: () => dispatch(onPlayHandler()),\n        onEnoughHandler: () => dispatch(onEnoughHandler()),\n        onMoreHandler: () => dispatch(onMoreHandler())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayTable)"]},"metadata":{},"sourceType":"module"}