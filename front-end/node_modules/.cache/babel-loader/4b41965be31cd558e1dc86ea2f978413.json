{"ast":null,"code":"import _toConsumableArray from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\C#\\\\blackjack_WebAPI - Copy\\\\front-end\\\\src\\\\containers\\\\PlayTable\\\\PlayTable.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink, Redirect } from 'react-router-dom';\nimport classes from './PlayTable.css';\nimport Dibs from '../../components/Dibs/DIbs';\nimport Rate from '../../components/Rate/Rate';\nimport Enemy from '../../components/Enemy/Enemy';\nimport PlayButton from '../../components/UI/PlayButton/PlayButton';\nimport Button from '../../components/UI/Button/Button';\nimport DealerHand from '../../components/DealerHand/DealerHand';\nimport PlayerHand from '../../components/PlayerHand/PlayerHand';\nimport { fetchMakeBet as _fetchMakeBet, onPlayHandler as _onPlayHandler, onEnoughHandler as _onEnoughHandler, onMoreHandler as _onMoreHandler, getDataUser as _getDataUser } from '../../store/actions/playTable';\nimport Chat, { scrollDown } from '../../components/UI/Chat/Chat';\nimport { connection, playHubProxy } from '../../Hubs/Hubs';\nvar userId;\nvar enemyId;\n\nvar PlayTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PlayTable, _Component);\n\n  function PlayTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PlayTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PlayTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isLogout: false,\n      bet: 0,\n      cash: 0,\n      enemyName: '',\n      enemyBet: 0,\n      enemyCash: 0,\n      messages: []\n    };\n\n    _this.isLogout = function () {\n      localStorage.removeItem('userId');\n\n      _this.setState({\n        isLogout: true\n      });\n\n      connection.stop();\n      console.log('stop');\n    };\n\n    _this.onCreateDibHandler = function (value) {\n      var div = document.createElement('div');\n      var div_enemy = document.createElement('div');\n\n      switch (value) {\n        case '1':\n          div.className = classes.dib_1 + ' ' + classes.user_dib_1;\n          div_enemy.className = classes.dib_1 + ' ' + classes.enemy_dib_1;\n          break;\n\n        case '5':\n          div.className = classes.dib_5 + ' ' + classes.user_dib_5;\n          div_enemy.className = classes.dib_5 + ' ' + classes.enemy_dib_5;\n          break;\n\n        case '25':\n          div.className = classes.dib_25 + ' ' + classes.user_dib_25;\n          div_enemy.className = classes.dib_25 + ' ' + classes.enemy_dib_25;\n          break;\n\n        case '50':\n          div.className = classes.dib_50 + ' ' + classes.user_dib_50;\n          div_enemy.className = classes.dib_50 + ' ' + classes.enemy_dib_50;\n          break;\n\n        case '100':\n          div.className = classes.dib_100 + ' ' + classes.user_dib_100;\n          div_enemy.className = classes.dib_100 + ' ' + classes.enemy_dib_100;\n          break;\n\n        default:\n          div.className = classes.dib_200 + ' ' + classes.user_dib_200;\n          div_enemy.className = classes.dib_200 + ' ' + classes.enemy_dib_200;\n      }\n\n      div.innerHTML = value;\n      div_enemy.innerHTML = value;\n      var bet;\n      var cash;\n\n      if (localStorage.getItem('enemyId') != -1) {\n        bet = _this.state.bet + parseInt(value);\n        cash = _this.state.cash - parseInt(value);\n      } else {\n        bet = parseInt(localStorage.getItem('bet')) + parseInt(value);\n        cash = parseInt(_this.props.cash) - parseInt(value);\n      }\n\n      if (bet !== 0 && cash >= 0 && _this.props.playerHandSum === 0) {\n        localStorage.setItem('bet', bet);\n        localStorage.setItem('cash', cash);\n        var isPlay = true;\n\n        _this.props.fetchMakeBet(bet, cash, isPlay);\n\n        document.getElementById('dibsBet').appendChild(div);\n        localStorage.setItem('dibsBet', document.getElementById('dibsBet').innerHTML);\n        var wrapper = document.createElement('div');\n        wrapper.appendChild(div_enemy);\n\n        if (localStorage.getItem('enemyId') != -1) {\n          playHubProxy.invoke('userBet', cash, bet, wrapper.innerHTML);\n          console.log(localStorage.getItem('enemyDibsBet'));\n        }\n      }\n    };\n\n    _this.onSend = function (value) {\n      _this.setState({\n        messages: _toConsumableArray(_this.state.messages).concat([{\n          userName: _this.props.nameUser,\n          message: value\n        }])\n      });\n\n      playHubProxy.invoke('gameChat', userId, value);\n    };\n\n    _this.endGame = function () {\n      if (enemyId != -1) {\n        playHubProxy.invoke('stopGame', userId);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(PlayTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      userId = localStorage.getItem('userId');\n      enemyId = localStorage.getItem('enemyId');\n\n      if (localStorage.getItem('dibsBet') != null) {\n        document.getElementById('dibsBet').innerHTML = localStorage.getItem('dibsBet');\n      }\n\n      console.log(localStorage.getItem('enemyDibsBet'));\n\n      if (localStorage.getItem('enemyDibsBet') != null) {\n        document.getElementById('enemyDibsBet').innerHTML = localStorage.getItem('enemyDibsBet');\n      }\n\n      console.log('user = ' + userId + ' enemy = ' + enemyId);\n\n      if (userId == null) {\n        this.setState({\n          isLogout: true\n        });\n      } else {\n        this.setState({\n          isLogout: false\n        });\n      }\n\n      this.props.getDataUser(userId);\n      playHubProxy.on('onGameStart', function (user, enemy, messages) {\n        this.setState({\n          cash: user.cash,\n          bet: user.bet,\n          enemyName: enemy.name,\n          enemyCash: enemy.cash,\n          enemyBet: enemy.bet,\n          messages: messages\n        });\n        scrollDown();\n      }.bind(this));\n      playHubProxy.on('onEnemyBet', function (enemy, dibsBet) {\n        if (localStorage.getItem('enemyDibsBet') == null) {\n          localStorage.setItem('enemyDibsBet', dibsBet);\n        } else {\n          localStorage.setItem('enemyDibsBet', localStorage.getItem('enemyDibsBet') + dibsBet);\n        }\n\n        document.getElementById('enemyDibsBet').innerHTML = dibsBet;\n        console.log(dibsBet);\n        this.setState({\n          enemyCash: enemy.cash,\n          enemyBet: enemy.bet\n        });\n      }.bind(this));\n      playHubProxy.on('onBet', function (user) {\n        this.setState({\n          cash: user.cash,\n          bet: user.bet\n        });\n      }.bind(this));\n      playHubProxy.on('onStopGame', function () {\n        this.props.history.push('/profile');\n      }.bind(this));\n      playHubProxy.on('onMessage', function (message) {\n        this.setState({\n          messages: _toConsumableArray(this.state.messages).concat([message])\n        });\n        scrollDown();\n      }.bind(this));\n\n      if (enemyId != -1) {\n        connection.start().done(function () {\n          console.log('start game');\n          playHubProxy.invoke('gameStart', userId);\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.setState({\n        bet: 0,\n        cash: 0,\n        enemyName: '',\n        enemyBet: 0,\n        enemyCash: 0\n      });\n      localStorage.removeItem('playerHand');\n      localStorage.removeItem('dealerHand');\n      localStorage.removeItem('playerHandSum');\n      localStorage.removeItem('dealerHandSum');\n      localStorage.removeItem('bet');\n      localStorage.removeItem('cash');\n      localStorage.removeItem('dibsBet');\n      localStorage.removeItem('enemyDibsBet');\n      localStorage.removeItem('name');\n      playHubProxy.off('onGameStart');\n      playHubProxy.off('onEnemyBet');\n      playHubProxy.off('onBet');\n      playHubProxy.off('onStopGame');\n      playHubProxy.off('onMessage');\n      connection.stop();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isLogout) {\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: classes.PlayTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.Container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, enemyId != -1 ? React.createElement(Rate, {\n        bet: this.state.bet,\n        cash: this.state.cash,\n        name: this.props.nameUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }) : React.createElement(Rate, {\n        bet: this.props.bet,\n        cash: this.props.cash,\n        name: this.props.nameUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }), enemyId != -1 ? React.createElement(Enemy, {\n        bet: this.state.enemyBet,\n        cash: this.state.enemyCash,\n        name: this.state.enemyName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }) : null, React.createElement(DealerHand, {\n        dealerHand: this.props.dealerHand,\n        dealerHandSum: this.props.dealerHandSum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"dibsBet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"enemyDibsBet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(PlayerHand, {\n        playerHand: this.props.playerHand,\n        playerHandSum: this.props.playerHandSum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), React.createElement(Dibs, {\n        dibs: this.props.dibs,\n        onDibCLick: this.onCreateDibHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }), React.createElement(PlayButton, {\n        onPlay: this.props.onPlayHandler,\n        onEnough: this.props.onEnoughHandler,\n        onMore: this.props.onMoreHandler,\n        disabledPlay: !this.props.isPlay,\n        disabledEnough: !this.props.isEnough,\n        disabledMore: !this.props.isMore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }), enemyId != -1 ? React.createElement(Chat, {\n        UserName: this.props.nameUser,\n        Messages: this.state.messages,\n        onSend: this.onSend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: classes.Button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"success\",\n        onClick: this.endGame,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")), React.createElement(Button, {\n        type: \"error\",\n        onClick: this.isLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"\\u0412\\u044B\\u0445\\u043E\\u0434\"))));\n    }\n  }]);\n\n  return PlayTable;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    deck: state.playTable.deck,\n    dibs: state.playTable.dibs,\n    bet: state.playTable.bet,\n    cash: state.playTable.cash,\n    nameUser: state.playTable.nameUser,\n    playerHand: state.playTable.playerHand,\n    playerHandSum: state.playTable.playerHandSum,\n    dealerHand: state.playTable.dealerHand,\n    dealerHandSum: state.playTable.dealerHandSum,\n    isPlay: state.playTable.isPlay,\n    isEnough: state.playTable.isEnough,\n    isMore: state.playTable.isMore,\n    backProfile: state.playTable.backProfile,\n    isExit: state.playTable.isExit\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchMakeBet: function fetchMakeBet(bet, cash, isPlay) {\n      return dispatch(_fetchMakeBet(bet, cash, isPlay));\n    },\n    getDataUser: function getDataUser(userId) {\n      return dispatch(_getDataUser(userId));\n    },\n    onPlayHandler: function onPlayHandler() {\n      return dispatch(_onPlayHandler());\n    },\n    onEnoughHandler: function onEnoughHandler() {\n      return dispatch(_onEnoughHandler());\n    },\n    onMoreHandler: function onMoreHandler() {\n      return dispatch(_onMoreHandler());\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayTable);","map":{"version":3,"sources":["D:\\C#\\blackjack_WebAPI - Copy\\front-end\\src\\containers\\PlayTable\\PlayTable.js"],"names":["React","Component","connect","NavLink","Redirect","classes","Dibs","Rate","Enemy","PlayButton","Button","DealerHand","PlayerHand","fetchMakeBet","onPlayHandler","onEnoughHandler","onMoreHandler","getDataUser","Chat","scrollDown","connection","playHubProxy","userId","enemyId","PlayTable","state","isLogout","bet","cash","enemyName","enemyBet","enemyCash","messages","localStorage","removeItem","setState","stop","console","log","onCreateDibHandler","value","div","document","createElement","div_enemy","className","dib_1","user_dib_1","enemy_dib_1","dib_5","user_dib_5","enemy_dib_5","dib_25","user_dib_25","enemy_dib_25","dib_50","user_dib_50","enemy_dib_50","dib_100","user_dib_100","enemy_dib_100","dib_200","user_dib_200","enemy_dib_200","innerHTML","getItem","parseInt","props","playerHandSum","setItem","isPlay","getElementById","appendChild","wrapper","invoke","onSend","userName","nameUser","message","endGame","on","user","enemy","name","bind","dibsBet","history","push","start","done","off","Container","dealerHand","dealerHandSum","playerHand","dibs","isEnough","isMore","mapStateToProps","deck","playTable","backProfile","isExit","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {NavLink, Redirect} from 'react-router-dom'\nimport classes from './PlayTable.css'\nimport Dibs from '../../components/Dibs/DIbs'\nimport Rate from '../../components/Rate/Rate'\nimport Enemy from '../../components/Enemy/Enemy'\nimport PlayButton from '../../components/UI/PlayButton/PlayButton'\nimport Button from '../../components/UI/Button/Button'\nimport DealerHand from '../../components/DealerHand/DealerHand'\nimport PlayerHand from '../../components/PlayerHand/PlayerHand'\nimport {fetchMakeBet, \n        onPlayHandler,\n        onEnoughHandler,\n        onMoreHandler,\n        getDataUser} from '../../store/actions/playTable'\n\nimport Chat, {scrollDown} from '../../components/UI/Chat/Chat'\nimport {connection, playHubProxy} from '../../Hubs/Hubs'\n\nvar userId;\nvar enemyId;\n\nclass PlayTable extends Component {\n    state = {\n        isLogout: false,\n        bet: 0,\n        cash: 0,\n        enemyName: '',\n        enemyBet: 0,\n        enemyCash: 0,\n        messages: []\n    }\n\n    isLogout = () => {\n        localStorage.removeItem('userId');\n        this.setState({\n            isLogout: true\n        });\n        connection.stop();\n        console.log('stop');\n    }\n    \n   onCreateDibHandler = value =>{   \n        let div = document.createElement('div');\n        let div_enemy = document.createElement('div');\n        switch(value){\n            case '1':\n                div.className = classes.dib_1 + ' ' + classes.user_dib_1\n                div_enemy.className = classes.dib_1 + ' ' + classes.enemy_dib_1\n                break;\n            case '5':\n                div.className = classes.dib_5 + ' ' + classes.user_dib_5\n                div_enemy.className = classes.dib_5 + ' ' + classes.enemy_dib_5\n                break;\n            case '25':\n                div.className = classes.dib_25 + ' ' + classes.user_dib_25\n                div_enemy.className = classes.dib_25 + ' ' + classes.enemy_dib_25\n                break;\n            case '50':\n                div.className = classes.dib_50 + ' ' + classes.user_dib_50\n                div_enemy.className = classes.dib_50 + ' ' + classes.enemy_dib_50\n                break;\n            case '100':\n                div.className = classes.dib_100 + ' ' + classes.user_dib_100\n                div_enemy.className = classes.dib_100 + ' ' + classes.enemy_dib_100\n                break;\n            default:\n                div.className = classes.dib_200 + ' ' + classes.user_dib_200\n                div_enemy.className = classes.dib_200 + ' ' + classes.enemy_dib_200\n        }        \n        div.innerHTML = value;\n        div_enemy.innerHTML = value;\n        let bet;\n        let cash;\n        if(localStorage.getItem('enemyId') != -1){\n            bet = (this.state.bet) + parseInt(value);\n            cash = (this.state.cash) - parseInt(value);\n        } else {\n            bet = (parseInt(localStorage.getItem('bet'))) + parseInt(value);\n            cash = (parseInt(this.props.cash)) - parseInt(value);\n        }\n        if(bet !== 0 && cash >= 0 && this.props.playerHandSum === 0){            \n            localStorage.setItem('bet', bet);\n            localStorage.setItem('cash', cash);\n            let isPlay = true;\n            this.props.fetchMakeBet(bet, cash, isPlay);\n            document.getElementById('dibsBet').appendChild(div);\n            localStorage.setItem('dibsBet', document.getElementById('dibsBet').innerHTML);\n            var wrapper = document.createElement('div');\n            wrapper.appendChild(div_enemy);\n            \n            if(localStorage.getItem('enemyId') != -1){\n                playHubProxy.invoke('userBet', cash, bet, wrapper.innerHTML);\n                console.log(localStorage.getItem('enemyDibsBet'));\n            }\n        }        \n    }\n\n    componentDidMount(){\n        userId = localStorage.getItem('userId');\n        enemyId = localStorage.getItem('enemyId');\n        \n        if(localStorage.getItem('dibsBet') != null){\n            document.getElementById('dibsBet').innerHTML = (localStorage.getItem('dibsBet'));\n        }\n        \n        console.log(localStorage.getItem('enemyDibsBet'));\n        if(localStorage.getItem('enemyDibsBet') != null){\n            document.getElementById('enemyDibsBet').innerHTML = (localStorage.getItem('enemyDibsBet'));\n        }\n\n        console.log('user = ' + userId + ' enemy = ' + enemyId);\n\n        if(userId == null){\n            this.setState({\n            isLogout: true\n        });\n        } else {\n            this.setState({\n                isLogout: false\n            });\n        }\n        this.props.getDataUser(userId);\n\n        playHubProxy.on('onGameStart', function(user, enemy, messages){\n            this.setState({\n                cash: user.cash,\n                bet: user.bet,\n                enemyName: enemy.name,\n                enemyCash: enemy.cash,\n                enemyBet: enemy.bet,\n                messages: messages\n            });\n            scrollDown();\n        }.bind(this));\n\n        playHubProxy.on('onEnemyBet', function(enemy, dibsBet){\n            if(localStorage.getItem('enemyDibsBet') == null){\n                localStorage.setItem('enemyDibsBet', dibsBet);\n            } else{\n                localStorage.setItem('enemyDibsBet', localStorage.getItem('enemyDibsBet') + dibsBet);\n            }\n            document.getElementById('enemyDibsBet').innerHTML = dibsBet;\n            console.log(dibsBet);\n            this.setState({\n                enemyCash: enemy.cash,\n                enemyBet: enemy.bet\n            });\n        }.bind(this));\n\n        playHubProxy.on('onBet', function(user){                    \n            this.setState({                    \n                cash: user.cash,\n                bet: user.bet\n            });\n        }.bind(this));\n\n        playHubProxy.on('onStopGame', function(){\n            this.props.history.push('/profile');\n        }.bind(this));\n\n        playHubProxy.on('onMessage', function(message){\n            this.setState({\n                messages: [...this.state.messages, message]\n            });\n            scrollDown();\n        }.bind(this));\n\n        if(enemyId != -1){\n            connection.start().done(function(){\n                console.log('start game');\n                playHubProxy.invoke('gameStart', userId);\n            }.bind(this));\n        }\n    }\n\n    componentWillUnmount(){\n        this.setState({\n            bet: 0,\n            cash: 0,\n            enemyName: '',\n            enemyBet: 0,\n            enemyCash: 0\n        });\n        localStorage.removeItem('playerHand');\n        localStorage.removeItem('dealerHand');\n        localStorage.removeItem('playerHandSum');\n        localStorage.removeItem('dealerHandSum');\n\n        localStorage.removeItem('bet');\n        localStorage.removeItem('cash');\n        localStorage.removeItem('dibsBet');\n        localStorage.removeItem('enemyDibsBet');\n        localStorage.removeItem('name');\n        playHubProxy.off('onGameStart');\n        playHubProxy.off('onEnemyBet');\n        playHubProxy.off('onBet');\n        playHubProxy.off('onStopGame');\n        playHubProxy.off('onMessage');\n        connection.stop();\n    }\n\n    onSend = (value) =>{\n        this.setState({\n            messages: [...this.state.messages, {userName: this.props.nameUser, message: value}]\n        });\n        playHubProxy.invoke('gameChat', userId, value);\n    }\n\n    endGame = () =>{\n        if(enemyId != -1){\n            playHubProxy.invoke('stopGame', userId);\n        }\n    }\n        \n    render(){\n        if(this.state.isLogout){\n            return (<Redirect to='/' />)\n        }\n        return(\n            <div className={classes.PlayTable}>\n            <div className={classes.Container}>\n                {enemyId != -1 ?\n                    <Rate\n                        bet={this.state.bet}\n                        cash={this.state.cash}\n                        name={this.props.nameUser}\n                    /> :\n                    <Rate\n                        bet={this.props.bet}\n                        cash={this.props.cash}\n                        name={this.props.nameUser}\n                    />\n                }\n                {enemyId != -1 ?\n                    <Enemy \n                        bet={this.state.enemyBet}\n                        cash={this.state.enemyCash}\n                        name={this.state.enemyName}\n                    /> : null\n                }\n                <DealerHand \n                    dealerHand={this.props.dealerHand}\n                    dealerHandSum={this.props.dealerHandSum}\n                />\n                <div id=\"dibsBet\"></div>\n                <div id=\"enemyDibsBet\"></div>\n                <PlayerHand \n                    playerHand={this.props.playerHand}\n                    playerHandSum={this.props.playerHandSum}\n                />\n                <Dibs \n                    dibs={this.props.dibs}\n                    onDibCLick={this.onCreateDibHandler}\n                />\n                <PlayButton \n                    onPlay={this.props.onPlayHandler}\n                    onEnough={this.props.onEnoughHandler}\n                    onMore={this.props.onMoreHandler}\n                    disabledPlay={!this.props.isPlay}\n                    disabledEnough={!this.props.isEnough}\n                    disabledMore={!this.props.isMore}\n                />\n                {enemyId != -1 ?\n                    <Chat\n                        UserName={this.props.nameUser}\n                        Messages={this.state.messages}\n                        onSend={this.onSend}\n                    />: null\n                }\n                <div className={classes.Button}>\n                    <NavLink to=\"/profile\">\n                        <Button \n                            type=\"success\" \n                            onClick={this.endGame}\n                        >Профиль</Button>\n                    </NavLink>         \n                    <Button \n                        type=\"error\"\n                        onClick={this.isLogout}\n                    >Выход</Button>\n                </div>                   \n            </div>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state){\n    return{\n        deck: state.playTable.deck,\n        dibs:state.playTable.dibs,\n        bet: state.playTable.bet,\n        cash: state.playTable.cash,\n        nameUser: state.playTable.nameUser,\n        playerHand: state.playTable.playerHand,\n        playerHandSum: state.playTable.playerHandSum,\n        dealerHand: state.playTable.dealerHand,\n        dealerHandSum: state.playTable.dealerHandSum,\n        isPlay: state.playTable.isPlay,\n        isEnough: state.playTable.isEnough,\n        isMore: state.playTable.isMore,\n        backProfile: state.playTable.backProfile,\n        isExit: state.playTable.isExit\n    }\n}\n\nfunction mapDispatchToProps(dispatch){\n    return{\n        fetchMakeBet: (bet, cash, isPlay)=> dispatch(fetchMakeBet(bet, cash, isPlay)),\n        getDataUser: userId => dispatch(getDataUser(userId)),\n        onPlayHandler: () => dispatch(onPlayHandler()),\n        onEnoughHandler: () => dispatch(onEnoughHandler()),\n        onMoreHandler: () => dispatch(onMoreHandler())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayTable)"]},"metadata":{},"sourceType":"module"}