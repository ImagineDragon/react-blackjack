{"ast":null,"code":"import _classCallCheck from \"D:\\\\C#\\\\react-blackjack\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\C#\\\\react-blackjack\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\C#\\\\react-blackjack\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\C#\\\\react-blackjack\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\C#\\\\react-blackjack\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport { Component } from 'react';\nimport { history } from '../store/history';\nimport { hubConnection } from 'signalr-no-jquery';\nimport { connect } from 'react-redux';\nimport { getUserProfile as _getUserProfile, onConnected as _onConnected, onNewUserConnected as _onNewUserConnected, onUserDisconnected as _onUserDisconnected, onUserReady as _onUserReady, setActivePlayer as _setActivePlayer } from '../store/actions/playTable';\nexport var connection = hubConnection('http://localhost:3001/'),\n    playHubProxy = connection.createHubProxy('playHub'); //http://blackjackwebapitest.us-west-2.elasticbeanstalk.com http://localhost:3001\n\nvar ProfileConnection =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProfileConnection, _Component);\n\n  function ProfileConnection() {\n    _classCallCheck(this, ProfileConnection);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ProfileConnection).apply(this, arguments));\n  }\n\n  _createClass(ProfileConnection, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userId = parseInt(localStorage.getItem('userId'));\n      this.props.getUserProfile(userId);\n      playHubProxy.on('onConnected', function (profiles) {\n        this.props.onConnected(profiles);\n      }.bind(this));\n      playHubProxy.on('onNewUserConnected', function (newUser) {\n        var users = this.props.users;\n        var index = users.indexOf(newUser);\n\n        if (index === -1) {\n          this.props.onNewUserConnected(newUser);\n        }\n      }.bind(this));\n      playHubProxy.on('onUserDisconnected', function (profile) {\n        if (connection != null) {\n          this.props.onUserDisconnected(profile);\n        }\n      }.bind(this));\n      playHubProxy.on('onUserReady', function (profile) {\n        this.props.onUserReady(profile);\n      }.bind(this));\n      playHubProxy.on('onGameAccept', function (profile) {\n        localStorage.setItem('enemyId', profile.id);\n        this.props.setActivePlayer(profile.id, true, 3);\n        playHubProxy.invoke(\"ready\", localStorage.getItem('userId'), false);\n        history.push('/play');\n      }.bind(this));\n      connection.start({\n        transport: 'serverSentEvents'\n      }).done(function () {\n        playHubProxy.invoke('connect', userId);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      playHubProxy.off('onConnected');\n      playHubProxy.off('onNewUserConnected');\n      playHubProxy.off('onUserDisconnected');\n      playHubProxy.off('onUserReady');\n      playHubProxy.off('onGameAccept');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return ProfileConnection;\n}(Component);\n\nfunction mapStateToProps(state) {\n  var _state$playTable = state.playTable,\n      count = _state$playTable.count,\n      users = _state$playTable.users,\n      user = _state$playTable.user;\n  return {\n    count: count,\n    users: users,\n    user: user\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getUserProfile: function getUserProfile(userId) {\n      return dispatch(_getUserProfile(userId));\n    },\n    onConnected: function onConnected(profiles) {\n      return dispatch(_onConnected(profiles));\n    },\n    setActivePlayer: function setActivePlayer(id, isBet, betCount) {\n      return dispatch(_setActivePlayer(id, isBet, betCount));\n    },\n    onNewUserConnected: function onNewUserConnected(newUser) {\n      return dispatch(_onNewUserConnected(newUser));\n    },\n    onUserDisconnected: function onUserDisconnected(profile) {\n      return dispatch(_onUserDisconnected(profile));\n    },\n    onUserReady: function onUserReady(profile) {\n      return dispatch(_onUserReady(profile));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileConnection);","map":{"version":3,"sources":["D:\\C#\\react-blackjack\\front-end\\src\\Hubs\\ProfileHub.js"],"names":["Component","history","hubConnection","connect","getUserProfile","onConnected","onNewUserConnected","onUserDisconnected","onUserReady","setActivePlayer","connection","playHubProxy","createHubProxy","ProfileConnection","userId","parseInt","localStorage","getItem","props","on","profiles","bind","newUser","users","index","indexOf","profile","setItem","id","invoke","push","start","transport","done","off","mapStateToProps","state","playTable","count","user","mapDispatchToProps","dispatch","isBet","betCount"],"mappings":"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","sourcesContent":["import {Component} from 'react'\r\n\r\nimport {history} from '../store/history'\r\n\r\nimport { hubConnection } from 'signalr-no-jquery';\r\n\r\nimport {connect} from 'react-redux'\r\n\r\nimport {getUserProfile,\r\n        onConnected,\r\n        onNewUserConnected,\r\n        onUserDisconnected,\r\n        onUserReady,\r\n        setActivePlayer} from '../store/actions/playTable'\r\n\r\nexport const connection = hubConnection('http://localhost:3001/'), playHubProxy = connection.createHubProxy('playHub'); //http://blackjackwebapitest.us-west-2.elasticbeanstalk.com http://localhost:3001\r\n\r\nclass ProfileConnection extends Component{\r\n    componentDidMount(){\r\n        const userId = parseInt(localStorage.getItem('userId'));\r\n        \r\n        this.props.getUserProfile(userId);\r\n\r\n        playHubProxy.on('onConnected', function(profiles){\r\n            this.props.onConnected(profiles);\r\n        }.bind(this));\r\n\r\n        playHubProxy.on('onNewUserConnected', function(newUser){\r\n            var users = this.props.users;\r\n            var index = users.indexOf(newUser);\r\n            if(index === -1){\r\n                this.props.onNewUserConnected(newUser);\r\n            }\r\n        }.bind(this));\r\n\r\n        playHubProxy.on('onUserDisconnected', function(profile){\r\n            if(connection != null){\r\n                this.props.onUserDisconnected(profile);\r\n            }\r\n        }.bind(this));\r\n\r\n        playHubProxy.on('onUserReady', function(profile){\r\n            this.props.onUserReady(profile);\r\n        }.bind(this));\r\n\r\n        playHubProxy.on('onGameAccept', function(profile){\r\n            localStorage.setItem('enemyId', profile.id);\r\n            this.props.setActivePlayer(profile.id, true, 3);\r\n            playHubProxy.invoke(\"ready\", localStorage.getItem('userId'), false);\r\n            history.push('/play');\r\n        }.bind(this));\r\n        \r\n        connection.start({ transport: 'serverSentEvents' }).done(function(){\r\n            playHubProxy.invoke('connect', userId);\r\n        });\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        playHubProxy.off('onConnected');\r\n        playHubProxy.off('onNewUserConnected');\r\n        playHubProxy.off('onUserDisconnected');\r\n        playHubProxy.off('onUserReady');\r\n        playHubProxy.off('onGameAccept');\r\n    }\r\n\r\n    render(){\r\n        return null;\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { count, users, user } = state.playTable;\r\n    return {\r\n        count, users, user\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n    return{\r\n        getUserProfile: (userId) => dispatch(getUserProfile(userId)),\r\n        onConnected: (profiles) => dispatch(onConnected(profiles)),\r\n        setActivePlayer: (id, isBet, betCount) => dispatch(setActivePlayer(id, isBet, betCount)),\r\n        onNewUserConnected: (newUser) =>dispatch(onNewUserConnected(newUser)),\r\n        onUserDisconnected: (profile) =>dispatch(onUserDisconnected(profile)),\r\n        onUserReady: (profile) =>dispatch(onUserReady(profile))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileConnection)"]},"metadata":{},"sourceType":"module"}